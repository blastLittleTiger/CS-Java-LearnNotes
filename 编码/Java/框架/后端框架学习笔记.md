### 后端框架学习笔记

***

1.运行过程

WishList(Domain)-->WishListMapper(DAO)-->WishListService(Service)-->WishListController(Controller)
以上是从原型定义到mybatis的Mapper文件定义，再到提供服务，然后提供接口和结果的过程。

2.@Param参数

在定义mybatis的mapper文件或者定义基于注解的sql语句时候，使用@Param注解，如下：
```java
@Select("SELECT id, user_id, item_id, add_price, add_time, created, updated FROM" +"user_collection_info WHERE user_id= #{userId} AND item_id= #{itemId, jdbcType=BIGINT}")
List<WishList> getWishListItemByItemId(@Param("userId") long userId, @Param("itemId") long itemId);
```
@Param后的字段和#{}之中的内容对应，select选择的是数据库之中的字段，后面的#{itemId}可以自由命名，只要在@Param之中对应起来就行。

3.IDEA的几个缩写

**psvm**=`补全main函数`
**fori**   =`for循环`
**sout**  =`System.out.println();`

4.接口，参数，请求等之间的关系

**接口的请求**：接口分为一般接口和分布式接口（如Dubbo接口），一般的随便调用，Dubbo接口主要是为了在分布式环境下提供服务，可以在不同的机器之间调用(RPC)；**返回的数据格式**：调用了接口之后，返回的数据一般是json格式的，但是其中的具体内容，还需要和前端商讨，返回的数据到底是什么格式；**参数的传递**：在*Http的**Get**请求*下，所需要的数据可以通过URL上通过`http://localhost:8080/wishlist/getMarkList?userId=2&pageSize=10&pageStart=0 `  `?参数1=值1&参数2=值2&...`这种方式为参数赋值，我们可以通过url给controller中调用的方法的参数赋值，**此时controller方法参数的名字和url之中的参数的名字要相同，否则取不到值**。而对于*Http的**Post**请求*，我们是没法看到对应的页面的，传递参数的方式是一样的，需要借助工具实现，如postman来发送post请求。一个“悖论”是，我们需要的参数通过url传递，*但是应该也有其他方式传递*，比如我提交了注册按钮，然后，一般而言不会跳转到一个新的页面，应该是直接取到后台返回的结果，然后在本页刷新即可，也就是说，*url在取得参数数据之后*（**这种情况是Post请求的情况，而Get请求是相对应起来的**），这种情况是针对于Post请求的，可以把Post请求理解为在后端进行，不需要对应的页面即可。**字段的对应关系**：还有在contorller, service, mapper, url和数据库之中字段的对应关系，mappr和数据库对应，url和controller对应，其他地方没有明确的要求，定义统一和方便自己查找即可，*对于时间的处理，一般不写在函数的参数请求之中，而直接在SQL中操作*。

5.微服务

不能我去查找别人的，我没有权限的数据库字段，不是我的模块，对我而言，我是看不到的，我需要的数据我无法直接获取的时候，我需要调用别人提供给我的接口，一般而言，我只需要在这些数据之中找到我要的部分，然后将其组装，就可以了。简言之：**不是我的，我无法直接操作底层（数据库），只能通过调用别人的提供的接口，来获取我需要的内容**。

6.几个常见的术语

| 关键词  | 名称                              | 术语         |
| ------- | --------------------------------- | ------------ |
| api接口 | Service接口                       | service      |
|         | Model  接口                       | model        |
| 实现类  | Mapper 接口                       | dao          |
|         | Model POJO类                      | domain/model |
|         | Service/Serviceimpl Service实现类 | service      |
|         | Controller 调用类                 | controller   |

7.异常处理和日志

异常处理一般在service层处理，需要处理的时候处理，返回相应的result(一般是Json格式)，日志的话一般是使用logback，常量常数的话一般不是直接使用1,0这种表示，而是将其定义为常量，这样更有含义，明确。

8.数据来源

我自己管理的数据库表，只有一部分我需要的数据，但是其他的部分在别人的数据库表之中，我怎么拿到全部我想要的数据呢？一般的思路是这样的：在*分布式的系统和微服务的架构下*，~~我无法直接操作别人的数据库，无法直接通过操作别人数据库的方式来获得数据~~，所以**只能通过别人提供的服务接口来获得数据，然后通过和我自己的一部分数据，通过一定的条件查询，拼装组合出我想要的数据**。一般而言，在mybatis之中，需要定义好一个组装成的数据的Model，然后直接将数据填充到Model的对象之中去。