### 后端框架学习笔记

***

1.运行过程

WishList(Domain)-->WishListMapper(DAO)-->WishListService(Service)-->WishListController(Controller)
以上是从原型定义到mybatis的Mapper文件定义，再到提供服务，然后提供接口和结果的过程。

2.@Param参数

在定义mybatis的mapper文件或者定义基于注解的sql语句时候，使用@Param注解，如下：
```java
@Select("SELECT id, user_id, item_id, add_price, add_time, created, updated FROM" +"user_collection_info WHERE user_id= #{userId} AND item_id= #{itemId, jdbcType=BIGINT}")
List<WishList> getWishListItemByItemId(@Param("userId") long userId, @Param("itemId") long itemId);
```
@Param后的字段和#{}之中的内容对应，select选择的是数据库之中的字段，后面的#{itemId}可以自由命名，只要在@Param之中对应起来就行。

3.IDEA的几个缩写

**psvm**=`补全main函数`
**fori**   =`for循环`
**sout**  =`System.out.println();`

4.接口，参数，请求等之间的关系

**接口的请求**：接口分为一般接口和分布式接口（如Dubbo接口），一般的随便调用，Dubbo接口主要是为了在分布式环境下提供服务，可以在不同的机器之间调用(RPC)；**返回的数据格式**：调用了接口之后，返回的数据一般是json格式的，但是其中的具体内容，还需要和前端商讨，返回的数据到底是什么格式；**参数的传递**：在*Http的**Get**请求*下，所需要的数据可以通过URL上通过`http://localhost:8080/wishlist/getMarkList?userId=2&pageSize=10&pageStart=0 `  `?参数1=值1&参数2=值2&...`这种方式为参数赋值，我们可以通过url给controller中调用的方法的参数赋值，**此时controller方法参数的名字和url之中的参数的名字要相同，否则取不到值**。而对于*Http的**Post**请求*，我们是没法看到对应的页面的，传递参数的方式是一样的，需要借助工具实现，如postman来发送post请求。一个“悖论”是，我们需要的参数通过url传递，*但是应该也有其他方式传递*，比如我提交了注册按钮，然后，一般而言不会跳转到一个新的页面，应该是直接取到后台返回的结果，然后在本页刷新即可，也就是说，*url在取得参数数据之后*（**这种情况是Post请求的情况，而Get请求是相对应起来的**），这种情况是针对于Post请求的，可以把Post请求理解为在后端进行，不需要对应的页面即可。**字段的对应关系**：还有在contorller, service, mapper, url和数据库之中字段的对应关系，mappr和数据库对应，url和controller对应，其他地方没有明确的要求，定义统一和方便自己查找即可，*对于时间的处理，一般不写在函数的参数请求之中，而直接在SQL中操作*。

5.微服务

不能我去查找别人的，我没有权限的数据库字段，不是我的模块，对我而言，我是看不到的，我需要的数据我无法直接获取的时候，我需要调用别人提供给我的接口，一般而言，我只需要在这些数据之中找到我要的部分，然后将其组装，就可以了。简言之：**不是我的，我无法直接操作底层（数据库），只能通过调用别人的提供的接口，来获取我需要的内容**。

6.几个常见的术语

| 关键词  | 名称                              | 术语         |
| ------- | --------------------------------- | ------------ |
| api接口 | Service接口                       | service      |
|         | Model  接口                       | model        |
| 实现类  | Mapper 接口                       | dao          |
|         | Model POJO类                      | domain/model |
|         | Service/Serviceimpl Service实现类 | service      |
|         | Controller 调用类                 | controller   |

7.异常处理和日志

异常处理一般在service层处理，需要处理的时候处理，返回相应的result(一般是Json格式)，日志的话一般是使用logback，常量常数的话一般不是直接使用1,0这种表示，而是将其定义为常量，这样更有含义，明确。

8.数据来源

我自己管理的数据库表，只有一部分我需要的数据，但是其他的部分在别人的数据库表之中，我怎么拿到全部我想要的数据呢？一般的思路是这样的：在*分布式的系统和微服务的架构下*，~~我无法直接操作别人的数据库，无法直接通过操作别人数据库的方式来获得数据~~，所以**只能通过别人提供的服务接口来获得数据，然后通过和我自己的一部分数据，通过一定的条件查询，拼装组合出我想要的数据**。一般而言，在mybatis之中，需要定义好一个组装成的数据的Model，然后直接将数据填充到Model的对象之中去。

9.IDEA调试快捷键

| 键                | 模式           | 作用                                 |
| ----------------- | -------------- | ------------------------------------ |
| **F7**            | Debug          | **进入断点方法之中**                 |
| **F8**            | Debug          | **不进入断点，越过断点直接给出结果** |
| **F9**            | Debug          | **恢复程序运行**                     |
| **Alt + F8**      | Debug          | **弹出可输入表达式的计算框**         |
| Ctrl + F8         | Debug / Common | 设置/清除断点                        |
| Shift + F7        | Debug          | 智能步入，会让你选择一个进入的方法   |
| Shift + F8        | Debug          | 跳出，恢复程序运行，=F9              |
| Ctrl + Shift + F8 | Debug          | 设置断点的进入条件                   |
| Alt + Shift + F7  | Debug          | 进入嵌套的方法之中                   |

10.IDEA的Debug使用

① 如下图 Gif 所示，查看所选对象的方法常用有三种方式：
  - 选中对象后，使用快捷键 `Alt + F8`。
  - 选中对象后，拖动对象到 `Watches`。
  - 选中对象后，鼠标悬停在对象上 2 秒左右。
  - 想看对象的具体内容，选中之中，使用`Ctrl + F1`，查看对象具体内容。

![img1](https://raw.githubusercontent.com/prayjourney/_mypictures/master/dev/bebug1.gif)

![img6](https://raw.githubusercontent.com/prayjourney/_mypictures/master/dev/debug6.gif)

② 如下图 Gif 所示，在弹出表达式输入框中 IntelliJ IDEA 也是能帮我们智能提示。
![img2](https://raw.githubusercontent.com/prayjourney/_mypictures/master/dev/bebug2.gif)

③ 如下图 Gif 所示，当我们需要过掉后面的所有断点的时候，我们不需要去掉这些断点，只需要点击左下角那个小圆点，点击小圆点之后，所有断点变成灰色，然后我们再在按快捷键 F9 即可过掉当前和后面所有的断点。
![img3](https://raw.githubusercontent.com/prayjourney/_mypictures/master/dev/bebug3.gif)

④ 如下图 Gif 所示，我们可以给断点设置进入的条件，因为变量 temp3 不等于 200 所以该断点没有被进入直接跳过。
![img4](https://raw.githubusercontent.com/prayjourney/_mypictures/master/dev/bebug4.gif)

⑤ 如 下图Gif 演示，有时候当我们步入方法体之后，还想回退到方法体外，断点进入 addNum 方法后，点击 Drop Frame 按钮之后，断点重新回到方法体之外。
![img5](https://raw.githubusercontent.com/prayjourney/_mypictures/master/dev/bebug5.gif)

11.mybatis 到底要不要写一对多、一对一关联?

- 方法1
  - Dao 层有一对多、一对一关联
  - Service 层写业务逻辑

- 方法2
    - Dao 层不写一对多、一对一关联，只提供基本的增删查改
    - Service 层完成关联查询等以及写业务逻辑

方法1在效率上貌似有优势，但写 resultMap 和语句真是不开心
方法2对程序员比较友好，但效率不如方法一，而且 service 层会比较臃肿

12.日志的配置，以及其含义

1.[Log4j的配置](https://blog.csdn.net/mgl934973491/article/details/55096870),   2.[log4j的使用--IDEA创建maven项目](https://blog.csdn.net/mgl934973491/article/details/55096966)

13.gitflow简单的操作

![gitflow简单的操作](https://raw.githubusercontent.com/prayjourney/_mypictures/master/blog/gitflow%E7%AE%80%E5%8D%95%E7%9A%84%E6%93%8D%E4%BD%9C%E6%96%B9%E5%BC%8F.png)



14.Spring MVC之中出现:No mapping found for HTTP request with URI

A:[关于No mapping found for HTTP request with URI...](http://www.cnblogs.com/of-course/p/6055311.html),   [DID NOT FIND HANDLER METHOD FOR SPRINGMVC资源文件扫描不到---关于SPRING的那些坑](http://www.cnblogs.com/ning-blogs/p/5244419.html)



15.springmvc可以对前台返回json数据,也可以从**前台获取JSON格式的数据**, 当然,JSON格式只是最常用的一种格式,还有很多其他的格式,后台给前端返回json数据相对简单,而前台给后台发送JSON格式数据的时候,就需要注意,我们要使用AJAX来帮助(jquey的ajax)即可.此时,一定要搞清楚方向的问题,是**前端发送json数据到后台**,所以这个发送时从前端发给后台,就是从前端浏览器之中发起请求,在web服务器如tomcat运行的时候,后台会接收到这个请求,获得参数,然后才去相应的措施.
1.[springmvc 接收json对象的两种方式 ](https://blog.csdn.net/u012099869/article/details/50273507),  2.[Java运用JSON实现后台与前端分工合作（代码实例） ](https://blog.csdn.net/zhangliangzi/article/details/50197835), 3. [SpringMVC——对Ajax的处理（包含 JSON 类型）](http://www.cnblogs.com/solverpeng/p/5821726.html),  4.[SpringMVC @RequestBody 处理ajax请求](http://www.xuebuyuan.com/2040729.html), 5. [ajax请求，fastjson报出错误：syntax error, expect {, actual error, pos 0](https://www.jianshu.com/p/1c40a32b5866),  6.[springmvc与fastjson的整合，注解@RequestBody的使用](http://www.cnblogs.com/boywwj/p/7441642.html)



16.表单form简介

**基本语法**

```html
<FORM ACTION="URL" METHOD="GET|POST" ENCTYPE="MIME" TARGET="...">
... ... 
</FORM> 
```

**基本功能**
**表单在网页中主要负责的是数据采集功能**，一个表单基本由三部分组成

- **表单标签**：这里面包含了处理表单数据所用 CGI （Common Gateway Interface，通用网关接口）程序的 URL （Uniform Resource Location，统一资源定位符）以及数据提交到服务器的方法.
- **表单域**：包含了文本框、密码框、隐藏域、多行文本框、复选框、单选框、下拉选择框和文件上传框等。
- **表单按钮**：包括提交按钮、复位按钮和一般按钮；用于将数据传送到服务器上的CGI脚本或者取消输入，还可以用表单按钮来控制其他定义了处理脚本的处理工作.

**两个参数**

- method:  **post和get均可, 都可以作为提交数据的方法**, 但是一般post是推送消息给服务器, get是从服务器获取数据, 这是约定形成的, 当没有明确指定method的时候, **默认的method是get**.
- action: **action是提交给处理的url**, 意思是把表单提交到这个url处理, 没有action, action="" 或者action="?", 都是**将表单数据提交到本页的意思**.
  1.[HTML <form> 标签的 method 属性](http://www.w3school.com.cn/tags/att_form_method.asp),   2.[HTML 表单（form） 使用详解](https://blog.csdn.net/bobozhanghb/article/details/46285085),   3.[HTML里面form表单name,action,method,target,enctype等属性用法](http://www.cnblogs.com/yj716716yj/p/6189722.html),   4.[ HTML 表单 (form) 的作用解释 ](https://blog.csdn.net/ajianyingxiaoqinghan/article/details/77678772),   5.[SpringMVC表单标签简介](http://elim.iteye.com/blog/1807330)



17.前端和后端的感悟

A:form之中的action,对应的**不是**一个获取到的地址, 而是将数据传送, 然后让其处理问题的地址, 即**push**! form之中的表单信息提交给Spring MVC之中RequestMapping之中的url进行处理,是的! **但是,为什么此处没有获得那边传过来的数据呢???  **其实,意思就是,**应该是后端的数据绑定到了前端, 还是说前端的数据传递到了后端**?---> 我想,肯定是~~前端的数据,传到了后端,而传值得方式,是通过前端和后端都有,但是在后端定义的数据模型,id,来完成的~~. 就是说,在**后端定义了一个模型, key在后端定义好了, 但是value需要前端传过来, 给后端, 经过后端处理, 然后显示出来**.



18.关于form标签的path和commandName

form标签之中的path，commandName(modelAttribute)的来源，path就是我需要的一个值的对应的Domain(Model,POJO)类之中的相应的字段，commandName(modelAttribute)就是在Controller之中定义的Model(ModelMap, ModelAndView)对应的Model的key。此处需要理清楚数据绑定的对象，数据绑定的方向。



19.Spring MVC前后端数据交互

A：1.[Spring MVC前后端数据交互总结](http://www.cnblogs.com/chentingk/p/6073963.html),   2.[Spring MVC 后端获取前端提交的json格式字符串并直接转换成control方法对应的参数对象](http://www.cnblogs.com/dimmacro/p/4863420.html),   3.[Spring MVC 传值方式总结](http://blog.51cto.com/cnn237111/1894506),   4.[SpringMVC前端传值到Controller与Controller中传值到View解析](https://blog.csdn.net/mexican_jacky/article/details/50194667),   5.[Spring 向页面传值以及接受页面传过来的参数的方式](http://www.cnblogs.com/liuhongfeng/p/4802013.html)




20.JSP页面使用a href来跳转到另一个jsp页面

A:Spring MVC貌似不支持从一个jsp页面通过\<a href="sss.jsp"\>的方式跳转，都要通过controller的方式访问页面



21.视图配置的时候，可以设置多个文件夹吗？可以配置多种视图后缀吗？

A:



22:Spring MVC之中form标签，jstl标签，sf标签，el表达式，各自使用在什么地方并且有什么区别？

A:



23:Spring MVC的模板技术有哪些？

A:



24:Spring MVC后端传给前端值，怎么传，有哪些方法？

A:



25:Spring MVC前端传给后端值，怎么传，有哪些方法？

A:






ref:

1.[IDEA 图标介绍。 缓存和索引介绍、清理方法和Debug使用](http://www.cnblogs.com/wangmingshun/p/6416397.html),   2.[使用 mybatis 到底要不要写一对多、一对一关联](https://www.v2ex.com/t/231189),   3.[Log4j的配置](https://blog.csdn.net/mgl934973491/article/details/55096870),   4.[log4j的使用--IDEA创建maven项目](https://blog.csdn.net/mgl934973491/article/details/55096966)